<!-- Project Modal -->
<div *ngIf="isModalOpen"
  class="fixed inset-0 w-screen h-screen z-[10000] bg-black/70 backdrop-blur-xl flex justify-center items-center p-6 animate-fade-in"
  role="dialog" aria-modal="true" aria-labelledby="modal-title" (keydown.escape)="closeProject()"
  (click)="closeProject()">
  <div
    class="relative bg-gradient-to-br from-neutral-950/90 via-neutral-900/90 to-neutral-950/90 border border-white/20 rounded-3xl p-6 md:p-10 w-full max-w-6xl max-h-[95vh] overflow-y-auto shadow-[0_0_60px_-15px_rgba(0,0,0,0.8)] transform scale-95 animate-zoom-in transition-all duration-500 backdrop-blur-2xl hover:shadow-[0_0_80px_-10px_rgba(255,255,255,0.2)] z-[9999]"
    (click)="$event.stopPropagation()">
    <!-- Close button -->
    <button
      class="absolute top-5 right-5 text-neutral-400 hover:text-red-400 text-3xl transition-all duration-300 hover:rotate-90 focus:outline-none focus:ring-2 focus:ring-red-400 rounded-full p-2"
      (click)="$event.stopPropagation(); closeProject()" aria-label="Close modal">
      <i class="fa-solid fa-xmark"></i>
    </button>

    <!-- Title -->
    <h2 id="modal-title"
      class="text-3xl md:text-5xl font-extrabold text-accent bg-clip-text bg-gradient-to-r from-primary via-accent to-secondary mb-6 tracking-tight drop-shadow-[0_0_20px_rgba(255,255,255,0.1)]">
      {{ selectedProject?.title }}
    </h2>

    <p class="text-neutral-300 mb-8 leading-relaxed text-lg md:text-xl opacity-90">
      {{ selectedProject?.fullDescription }}
    </p>

    <!-- Animated divider -->
    <div
      class="relative w-full h-[2px] mb-8 bg-gradient-to-r from-transparent via-primary to-transparent animate-glow-line">
    </div>

    <!-- Gallery -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 mb-10">
      <div *ngFor="let img of selectedProject?.gallery; let i = index"
        class="relative overflow-hidden rounded-2xl shadow-lg group cursor-pointer border border-white/10 hover:border-primary/40 transition-all duration-500 hover:scale-[1.03]"
        tabindex="0" (keydown.enter)="openImage(img)" (click)="$event.stopPropagation(); openImage(img)">
        <img [src]="img" [alt]="'Project image ' + (i + 1)"
          class="w-full h-56 md:h-64 object-cover transition-all duration-700 group-hover:scale-110 group-hover:brightness-110"
          loading="lazy" />
        <div
          class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-center justify-center">
          <i class="fa-solid fa-expand text-white text-3xl"></i>
        </div>
      </div>
    </div>

    <!-- Tools -->
    <h4
      class="font-semibold text-2xl mb-5 text-accent dark:text-accent border-b border-primary/40 inline-block pb-1 tracking-wide">
      <i class="fa-solid fa-tools mr-2"></i> Tools Used
    </h4>
    <div class="flex flex-wrap gap-3 mb-10">
      <span *ngFor="let tool of selectedProject?.tools"
        class="px-5 py-2 text-sm rounded-full bg-gradient-to-r from-primary/20 to-secondary/20 text-gray-500 dark:text-accent font-medium border border-primary/40 hover:shadow-[0_0_15px_rgba(255,255,255,0.2)] transition-all duration-300 hover:scale-105">
        <i class="fa-solid fa-wrench mr-1"></i>{{ tool }}
      </span>
    </div>

    <!-- Links -->
    <div class="flex flex-col sm:flex-row items-center justify-center gap-5 mt-10">
      <a [href]="selectedProject?.ProjectLive" target="_blank" rel="noopener noreferrer"
        class="inline-flex items-center gap-3 px-8 py-3 text-base font-semibold text-white bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 rounded-full transition-all duration-300 hover:scale-110 shadow-lg focus:outline-none focus:ring-2 focus:ring-primary"
        (click)="$event.stopPropagation()">
        <i class="fa-solid fa-up-right-from-square"></i> View Live
      </a>
      <a [href]="selectedProject?.projectGit" target="_blank" rel="noopener noreferrer"
        class="inline-flex items-center gap-3 px-8 py-3 text-base font-semibold text-white bg-gradient-to-r from-neutral-800 to-neutral-700 hover:from-neutral-700 hover:to-neutral-600 rounded-full transition-all duration-300 hover:scale-110 shadow-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"
        (click)="$event.stopPropagation()">
        <i class="fa-brands fa-github"></i> GitHub
      </a>
    </div>
  </div>
</div>